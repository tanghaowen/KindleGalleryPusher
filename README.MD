KindleGalleryPusherğŸ“·
==========

[demoã¯ã“ã¡ã‚‰](http://gallery.lpanda.net/)


è²´æ–¹ã®å†™çœŸé›†ã‚’ã¿ã‚“ãªãŸã‚·ã‚§ã‚¢ã—ã¾ã›ã‚“ã‹ï¼Ÿ

## ã“ã®ã‚µã‚¤ãƒˆã‚¢ã®å‘ã„ãŸäºº
* è‡ªåˆ†ã®å†™çœŸé›†ã‚’kindleã§ã‚‚ã¿ãŸã„
* kindleã‚’ä½¿ã£ã¦ã„ã‚‹å‹é”ã«ã‚·ã‚§ã‚¢ã—ãŸã„


## ã“ã®ã‚µã‚¤ãƒˆã«ã¤ã„ã¦
* ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸå†™çœŸé›†ã‚’è‡ªå‹•ã«*mobi* *epub* ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«å¤‰æ›ã—ã¾ã™
* æ°—ã«å…¥ã£ãŸå†™çœŸé›†ã‚’ç›´æ¥ã«è²´æ–¹ã®kindleãƒ‡ãƒã‚¤ã‚¹ã«ãƒ—ã‚·ãƒ¥ãƒƒã§ãã¾ã™

## requirements
> * Django>2.1
> * awesome-slugify
> * mysqlclient
> * python-cv2
> * Pillow
> * psutil
> * requests
> * beautifulsoup4
> * lxml
> * [django suit-v2 ](https://django-suit.readthedocs.io/en/v2/)
> * django-clean 

 ## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«é–¢ã—ã¦
 
1.  ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¯*mysql*ã‚’ä½¿ã„ã¾ã™ã€‚*KindleGalleryPusher/settings.py*ã§ã€ä¸‹ã®éƒ¨åˆ†ã‚’ç·¨é›†ã—ã¦ãã ã•ã„ã€‚
    ```python
    DATABASES = {
        'default': {
            'ENGINE': 'django.db.backends.mysql',
            'NAME': 'kindleGallerysite',
            'USER': 'your_mysql_username',
            'PASSWORD': 'your_mysql_password',
            'HOST': '127.0.0.1',
        }
    }
    ```
2. æ¬¡ã«mysqlã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œã‚Šã¾ã™
    ```sql
    CREATE DATABASE kindleGallerysite
    ```


### mysqlã«é–¢ã—ã¦

ç¾åœ¨mysqlã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯*8.0*ã§ã™ã€‚*mysql 8.0*ã‹ã‚‰ã€æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æš—å·åŒ–æ–¹æ³•ãŒå°å…¥ã•ã‚Œã¾ã—ãŸã€‚

ã—ã‹ã—ã€ç¾åœ¨ã®*django*ã¯ã“ã®æ–°ã—ã„æš—å·åŒ–æ–¹å¼ã‚’æ”¯æ´ã—ã¦ã„ã¾ã›ã‚“ã®ã§ã€ã‚‚ã—*mysql 8.0*ä»¥ä¸Šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ã†ãªã‚‰ã€æš—å·åŒ–æ–¹å¼ã‚’*Legacy Authentication Method*ã«å¤‰æ›´ã—ã¦ãã ã•ã„

### sqlite ã«é–¢ã—ã¦

ã‚‚ã—sqliteã‚’ä½¿ã„ãŸã„ãªã‚‰ã€*KindleGalleryPusher/settings.py* ã®*DATABASES*ã‚’ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã—ãŸãã ã•ã„

``` python
    DATABASES = {
        'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': 'datas.sql',
        }
    }
```

## ãƒ—ã‚·ãƒ¥ãƒƒã«é–¢ã—ã¦

è©³ã—ã„kindleã®ãƒ—ã‚·ãƒ¥ãƒƒæ©Ÿèƒ½èª¬æ˜ã¯ã‚¢ãƒã‚¾ãƒ³ã®ãƒšãƒ¼ã‚¸ã‚’ã”è¦§ãã ã•ã„ã€‚

[Kindleãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚µãƒ¼ãƒ“ã‚¹](https://www.amazon.co.jp/gp/help/customer/display.html/ref=kinw_myk_pd_ln?ie=UTF8&nodeId=200767340#assignemail)

ç°¡å˜ã«è¨€ã†ã¨ã€Kindleã®ãƒ—ã‚·ãƒ¥ãƒƒæ©Ÿèƒ½ã¯ã¤ã¾ã‚Š
> é€ä¿¡ã—ãŸã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ã€eãƒ¡ãƒ¼ãƒ«ã®å½¢ã§kindleãƒ‡ãƒã‚¤ã‚¹ã¨é€£æºã—ã¦ã„ã‚‹ãƒ¡ãƒ¼ãƒ«ãƒœãƒƒã‚¯ã‚¹ã«é€ä¿¡ã™ã‚‹ã€‚
> 
> é€ä¿¡å¾Œã€kindleãƒ‡ãƒã‚¤ã‚¹ã¯è‡ªå‹•ã«æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹

ãƒ—ã‚·ãƒ¥ãƒƒæ©Ÿèƒ½ã‚’æœ‰åŠ¹ã«ã™ã‚‹ãŸã‚ã€*KindleGalleryPusher/settings.py* ã®smtpã‚’è¨­å®šã—ã¦ãã ã•ã„
```python
EMAIL_HOST = 'smtp.yourserver.net'
EMAIL_HOST_USER = 'your email'
EMAIL_HOST_PASSWORD = 'your_smtp_password'
```

ã¾ãŸã€*pushmonitor/mailsender.py*ã€€ã‚‚åŒã˜ãè¨­å®šã—ã¦ãã ã•ã„

```python
smtp_username = 'your email'
smtp_password = 'your_smtp_password'
smtp_hostname = 'smtp.yourserver.net'
```


## hostnameã«é–¢ã—ã¦

*KindleGalleryPusher/settings.py*ã®*ALLOWED_HOSTS* éƒ¨åˆ†ã§ã€è‡ªåˆ†ã®donamã‚’å…¥ã‚Œã¦ãã ã•ã„

```python
ALLOWED_HOSTS = ['gallery.lpanda.net', 'localhost', '127.0.0.1']
```